<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#CLASS-METHODS">CLASS METHODS</a>
    <ul>
      <li><a href="#new">new</a></li>
      <li><a href="#Chunking">Chunking</a></li>
      <li><a href="#SDgetvariablenames">SDgetvariablenames</a></li>
      <li><a href="#SDgetattributenames">SDgetattributenames</a></li>
      <li><a href="#SDgetattribute">SDgetattribute</a></li>
      <li><a href="#SDgetfillvalue">SDgetfillvalue</a></li>
      <li><a href="#SDgetrange">SDgetrange</a></li>
      <li><a href="#SDgetscalefactor">SDgetscalefactor</a></li>
      <li><a href="#SDgetdimsize">SDgetdimsize</a></li>
      <li><a href="#SDgetunlimiteddimsize">SDgetunlimiteddimsize</a></li>
      <li><a href="#SDgetdimnames">SDgetdimnames</a></li>
      <li><a href="#SDgetcal">SDgetcal</a></li>
      <li><a href="#SDget">SDget</a></li>
      <li><a href="#SDsetfillvalue">SDsetfillvalue</a></li>
      <li><a href="#SDsetrange">SDsetrange</a></li>
      <li><a href="#SDsetcal">SDsetcal</a></li>
      <li><a href="#SDsetcompress">SDsetcompress</a></li>
      <li><a href="#SDsettextattr">SDsettextattr</a></li>
      <li><a href="#SDsetvalueattr">SDsetvalueattr</a></li>
      <li><a href="#SDsetdimname">SDsetdimname</a></li>
      <li><a href="#SDput">SDput</a></li>
      <li><a href="#close">close</a></li>
    </ul>
  </li>
  <li><a href="#CURRENT-AUTHOR-MAINTAINER">CURRENT AUTHOR &amp; MAINTAINER</a></li>
  <li><a href="#PREVIOUS-AUTHORS">PREVIOUS AUTHORS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>PDL::IO::HDF::SD - PDL interface to the HDF4 SD library.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  use PDL;
  use PDL::IO::HDF::SD;
  
  #      
  # Creating and writing an HDF file
  #

  # Create an HDF file:
  my $hdf = PDL::IO::HDF::SD-&gt;new(&quot;-test.hdf&quot;);

  # Define some data
  my $data = sequence(short, 500, 5);

  # Put data in file as &#39;myData&#39; dataset with the names 
  #    of dimensions (&#39;dim1&#39; and &#39;dim2&#39;)
  $hdf-&gt;SDput(&quot;myData&quot;, $data , [&#39;dim1&#39;,&#39;dim2&#39;]);

  # Put some local attributes in &#39;myData&#39;
  #
  # Set the fill value to 0
  my $res = $hdf-&gt;SDsetfillvalue(&quot;myData&quot;, 0);
  # Set the valid range from 0 to 2000
  $res = $hdf-&gt;SDsetrange(&quot;myData&quot;, [0, 2000]);
  # Set the default calibration for &#39;myData&#39; (scale factor = 1, other = 0)
  $res = $hdf-&gt;SDsetcal(&quot;myData&quot;);

  # Set a global text attribute
  $res = $hdf-&gt;SDsettextattr(&#39;This is a global text test!!&#39;, &quot;myGText&quot; );
  # Set a local text attribute for &#39;myData&#39;
  $res = $hdf-&gt;SDsettextattr(&#39;This is a local text testl!!&#39;, &quot;myLText&quot;, &quot;myData&quot; );

  # Set a global value attribute (you can put all values you want)
  $res = $hdf-&gt;SDsetvalueattr( PDL::short( 20 ), &quot;myGValue&quot;);

  # Set a local value attribute (you can put all values you want)
  $res = $hdf-&gt;SDsetvalueattr( PDL::long( [20, 15, 36] ), &quot;myLValues&quot;, &quot;myData&quot; );

  # Close the file
  $hdf-&gt;close();

  #
  # Reading from an HDF file:
  #

  # Open an HDF file in read only mode:
  my $hdf = PDL::IO::HDF::SD-&gt;new(&quot;test.hdf&quot;);

  # Get a list of all datasets:
  my @dataset_list = $hdf-&gt;SDgetvariablename();

  # Get a list of the names of all global attributes:
  my @globattr_list = $hdf-&gt;SDgetattributenames();

  # Get a list of the names of all local attributes for a dataset:
  my @locattr_list = $hdf-&gt;SDgetattributenames(&quot;myData&quot;);

  # Get the value of local attribute for a dataset:
  my $value = $hdf-&gt;SDgetattribut(&quot;myLText&quot;,&quot;myData&quot;);

  # Get a PDL var of the entire dataset &#39;myData&#39;:
  my $data = $hdf-&gt;SDget(&quot;myData&quot;);

  # Apply the scale factor of &#39;myData&#39;
  $data *= $hdf-&gt;SDgetscalefactor(&quot;myData&quot;);

  # Get the fill value and fill the PDL var in with BAD:
  $data-&gt;inplace-&gt;setvaltobad( $hdf-&gt;SDgetfillvalue(&quot;myData&quot;) );

  # Get the valid range of a dataset:
  my @range = $hdf-&gt;SDgetrange(&quot;myData&quot;);
 
  #Now you can do what you want with your data
  $hdf-&gt;close();</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This library provides functions to read, write, and manipulate HDF4 files with HDF&#39;s SD interface.</p>

<p>For more infomation on HDF4, see http://hdf.ncsa.uiuc.edu/</p>

<p>There have been a lot of changes starting with version 2.0, and these may affect your code. PLEASE see the &#39;Changes&#39; file for a detailed description of what has been changed. If your code used to work with the circa 2002 version of this module, and does not work anymore, reading the &#39;Changes&#39; is your best bet.</p>

<p>In the documentation, the terms dataset and SDS (Scientific Data Set) are used interchangably.</p>

<h1 id="CLASS-METHODS">CLASS METHODS</h1>

<h2 id="new">new</h2>

<pre><code>    Open or create a new HDF object.</code></pre>

<pre><code>    Arguments:
        1 : The name of the file.
            if you want to write to it, prepend the name with the &#39;+&#39; character : &quot;+name.hdf&quot;
            if you want to create it, prepend the name with the &#39;-&#39; character : &quot;-name.hdf&quot;
            otherwise the file will be open in read only mode
    
    Returns the hdf object (die on error)</code></pre>

<pre><code>    my $hdf = PDL::IO::HDF::SD-&gt;new(&quot;file.hdf&quot;);</code></pre>

<h2 id="Chunking">Chunking</h2>

<pre><code>    Accessor for the chunking mode on this HDF file.
    
    &#39;Chunking&#39; is an internal compression and tiling the HDF library can
        perform on an SDS.
        
    This variable only affects they way SDput() works, and is ON by default.
    
    The code modifications enabled by this flag automatically partition the 
        dataset to chunks of at least 100x100 values in size. The logic on this
        is pretty fancy, and would take a while to doc out here. If you
        _really_ have to know how it auto-partitions the data, then look at
        the code.
    
    Someday over the rainbow, I&#39;ll add some features for better control of the
        chunking parameters, if the need arises. For now, it&#39;s just stupid easy 
        to use.</code></pre>

<pre><code>    Arguments:
        1 (optional): new value for the chunking flag.</code></pre>

<pre><code>    # See if chunking is currently on for this file:
    my $chunkvar = $hdf-&gt;Chunking();

    # Turn the chunking off:
    my $newvar = $hdf-&gt;Chunking( 0 );
    
    # Turn the chunking back on:
    my $newvar = $hdf-&gt;Chunking( 1 );</code></pre>

<h2 id="SDgetvariablenames">SDgetvariablenames</h2>

<pre><code>    get the list of datasets.</code></pre>

<pre><code>    No arguments
    Returns the list of dataset or undef on error.</code></pre>

<pre><code>    my @DataList = $hdfobj-&gt;SDgetvariablenames();</code></pre>

<h2 id="SDgetattributenames">SDgetattributenames</h2>

<pre><code>    Get a list of the names of the global or SDS attributes.</code></pre>

<pre><code>    Arguments:
        1 (optional) : The name of the SD dataset from which you want to get 
            the attributes. This arg is optional, and without it, it will 
            return the list of global attribute names.
        
    Returns a list of names or undef on error.</code></pre>

<pre><code>    # For global attributes :
    my @attrList = $hdf-&gt;SDgetattributenames();

    # For SDS attributes :
    my @attrList = $hdf-&gt;SDgetattributenames(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetattribute">SDgetattribute</h2>

<pre><code>    Get a global or SDS attribute value.</code></pre>

<pre><code>    Arguments:
        1 : The name of the attribute.
        2 (optional): The name of the SDS from which you want to get the attribute
            value. Without this arg, it returns the global attribute value of that name.
    
    Returns an attribute value or undef on error.</code></pre>

<pre><code>    # for global attributs :
    my $attr = $hdf-&gt;SDgetattribute(&quot;attr_name&quot;);

    # for local attributs :
    my $attr = $hdf-&gt;SDgetattribute(&quot;attr_name&quot;, &quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetfillvalue">SDgetfillvalue</h2>

<pre><code>    Get the fill value of an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS from which you want to get the fill value.
    
    Returns the fill value or undef on error.</code></pre>

<pre><code>    my $fillvalue = $hdf-&gt;SDgetfillvalue(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetrange">SDgetrange</h2>

<pre><code>    Get the valid range of an SDS.</code></pre>

<pre><code>    Arguments:
        1 : the name of the SDS from which you want to get the valid range.
    
    Returns a list of two elements [min, max] or undef on error.</code></pre>

<pre><code>    my @range = $hdf-&gt;SDgetrange(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetscalefactor">SDgetscalefactor</h2>

<pre><code>    Get the scale factor of an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS from which you want to get the scale factor.
    
    Returns the scale factor or undef on error.</code></pre>

<pre><code>    my $scale = $hdf-&gt;SDgetscalefactor(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetdimsize">SDgetdimsize</h2>

<pre><code>    Get the dimensions of a dataset.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS from which you want to get the dimensions.
        
    Returns an array of n dimensions with their sizes or undef on error.</code></pre>

<pre><code>    my @dim = $hdf-&gt;SDgetdimsize(&quot;dataset_name&quot;);
        </code></pre>

<h2 id="SDgetunlimiteddimsize">SDgetunlimiteddimsize</h2>

<pre><code>    Get the actual dimensions of an SDS with &#39;unlimited&#39; dimensions.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS from which you want to the dimensions.
    
    Returns an array of n dimensions with the dim sizes or undef on error.</code></pre>

<pre><code>    my @dims = $hdf-&gt;SDgetunlimiteddimsize(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetdimnames">SDgetdimnames</h2>

<pre><code>    Get the names of the dimensions of a dataset.</code></pre>

<pre><code>    Arguments:
        1 : the name of a dataset you want to get the dimensions&#39;names .
    
    Returns an array of n dimensions with their names or an empty list if error.</code></pre>

<pre><code>    my @dim_names = $hdf-&gt;SDgetdimnames(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDgetcal">SDgetcal</h2>

<pre><code>    Get the calibration factor from an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS
    
    Returns (scale factor, scale factor error, offset, offset error, data type), or undef on error.</code></pre>

<pre><code>    my ($cal, $cal_err, $off, $off_err, $d_type) = $hdf-&gt;SDgetcal(&quot;dataset_name&quot;);</code></pre>

<h2 id="SDget">SDget</h2>

<pre><code>    Get a the data from and SDS, or just a slice of that SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS you want to get.
        2 (optional): The start array ref of the slice.
        3 (optional): The size array ref of the slice (HDF calls this the &#39;edge&#39;).
        4 (optional): The stride array ref of the slice.
    
    Returns a PDL of data if ok, PDL::null on error.
    
    If the slice arguements are not given, this function will read the entire
        SDS from the file.
    
    The type of the returned PDL variable is the PDL equivalent of what was
        stored in the HDF file.</code></pre>

<pre><code>    # Get the entire SDS:
    my $pdldata = $hdf-&gt;SDget(&quot;dataset_name&quot;);

    # get a slice of the dataset
    my $start = [10,50,10];  # the start position of the slice is [10, 50, 10]
    my $edge = [20,20,20];   # read 20 values on each dimension from @start
    my $stride = [1, 1, 1];  # Don&#39;t skip values
    my $pdldata = $hdf-&gt;SDget( &quot;dataset_name&quot;, $start, $edge, $stride );</code></pre>

<h2 id="SDsetfillvalue">SDsetfillvalue</h2>

<pre><code>    Set the fill value for an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS.
        2 : The fill value.
    
    Returns true on success, undef on error.</code></pre>

<pre><code>    my $res = $hdf-&gt;SDsetfillvalue(&quot;dataset_name&quot;,$fillvalue);</code></pre>

<h2 id="SDsetrange">SDsetrange</h2>

<pre><code>    Set the valid range of an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS
        2 : an anonymous array of two elements : [min, max].
    
    Returns true on success, undef on error.</code></pre>

<pre><code>    my $res = $hdf-&gt;SDsetrange(&quot;dataset_name&quot;, [$min, $max]);</code></pre>

<h2 id="SDsetcal">SDsetcal</h2>

<pre><code>    Set the HDF calibration for an SDS.
    
    In HDF lingo, this means to define:
        scale factor
        scale factor error
        offset
        offset error</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS.
        2 (optional): the scale factor (default is 1)
        3 (optional): the scale factor error (default is 0)
        4 (optional): the offset (default is 0)
        5 (optional): the offset error (default is 0)
    
    Returns true on success, undef on error.
    
    NOTE: This is not required to make a valid HDF SDS, but is there if you want to use it.</code></pre>

<pre><code>    # Create the dataset:
    my $res = $hdf-&gt;SDsetcal(&quot;dataset_name&quot;);

    # To just set the scale factor:
    $res = $hdf-&gt;SDsetcal(&quot;dataset_name&quot;, $scalefactor);

    # To set all calibration parameters:
    $res = $hdf-&gt;SDsetcal(&quot;dataset_name&quot;, $scalefactor, $scale_err, $offset, $off_err);</code></pre>

<h2 id="SDsetcompress">SDsetcompress</h2>

<pre><code>    Set the internal compression on an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS.
        2 (optional): The gzip compression level ( 1 - 9 ). If not
            specified, then 6 is used.
    
    Returns true on success, undef on failure.
    
    WARNING: This is a fairly buggy feature with many version of the HDF library.
    Please just use the &#39;Chunking&#39; features instead, as they work far better, and
    are more reliable.</code></pre>

<pre><code>    my $res = $hdf-&gt;SDsetfillvalue(&quot;dataset_name&quot;,$deflate_value);</code></pre>

<h2 id="SDsettextattr">SDsettextattr</h2>

<pre><code>    Add a text HDF attribute, either globally, or to an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The text you want to add.
        2 : The name of the attribute
        3 (optional): The name of the SDS.
        
    Returns true on success, undef on failure.</code></pre>

<pre><code>    # Set a global text attribute:
    my $res = $hdf-&gt;SDsettextattr(&quot;my_text&quot;, &quot;attribut_name&quot;);

    # Set a local text attribute for &#39;dataset_name&#39;:
    $res = $hdf-&gt;SDsettextattr(&quot;my_text&quot;, &quot;attribut_name&quot;, &quot;dataset_name&quot;);</code></pre>

<h2 id="SDsetvalueattr">SDsetvalueattr</h2>

<pre><code>    Add a non-text HDF attribute, either globally, or to an SDS.</code></pre>

<pre><code>    Arguments:
        1 : A pdl of value(s) you want to store.
        2 : The name of the attribute.
        3 (optional): the name of the SDS.
    
    Returns true on success, undef on failure.</code></pre>

<pre><code>    my $attr = sequence( long, 4 );

    # Set a global attribute:
    my $res = $hdf-&gt;SDsetvalueattr($attribute, &quot;attribute_name&quot;);

    # Set a local attribute for &#39;dataset_name&#39;:
    $res = $hdf-&gt;SDsetvalueattr($attribute, &quot;attribute_name&quot;, &quot;dataset_name&quot;);</code></pre>

<h2 id="SDsetdimname">SDsetdimname</h2>

<pre><code>    Set or rename the dimensions of an SDS.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS.
        2 : An anonymous array with the dimensions names. For dimensions you want
            to leave alone, leave &#39;undef&#39; placeholders.
    
    Returns true on success, undef on failure.</code></pre>

<pre><code>    # Rename all dimensions
    my $res = $hdf-&gt;SDsetdimname(&quot;dataset_name&quot;, [&#39;dim1&#39;,&#39;dim2&#39;,&#39;dim3&#39;]);

    # Rename some dimensions
    $res = $hdf-&gt;SDsetdimname(&quot;dataset_name&quot;, [&#39;dim1&#39;, undef ,&#39;dim3&#39;]);</code></pre>

<h2 id="SDput">SDput</h2>

<pre><code>    Write to a SDS in an HDF file or create and write to it if it doesn&#39;t exist.</code></pre>

<pre><code>    Arguments:
        1 : The name of the SDS.
        2 : A pdl of data.
        3 (optional): An anonymous array of the dim names (only for creation)
        4 (optional): An anonymous array of the start of the slice to store 
            (only for putting a slice)

    Returns true on success, undef on failure.
    
    The datatype of the SDS in the HDF file will match the PDL equivalent as 
        much as possible.</code></pre>

<pre><code>    my $data = sequence( float, 10, 20, 30 ); #any value you want

    # Simple case: create a new dataset with a $data pdl
    my $result = $hdf-&gt;SDput(&quot;dataset_name&quot;, $data);

    # Above, but also naming the dims:
    $res = $hdf-&gt;SDput(&quot;dataset_name&quot;, $data, [&#39;dim1&#39;,&#39;dim2&#39;,&#39;dim3&#39;]);

    # Just putting a slice in there:
    my $start = [x,y,z];
    $res = $hdf-&gt;SDput(&quot;dataset_name&quot;, $data-&gt;slice(&quot;...&quot;), undef, $start);</code></pre>

<h2 id="close">close</h2>

<pre><code>    Close an HDF file.</code></pre>

<pre><code>    No arguments.</code></pre>

<pre><code>    my $result = $hdf-&gt;close();</code></pre>

<h1 id="CURRENT-AUTHOR-MAINTAINER">CURRENT AUTHOR &amp; MAINTAINER</h1>

<p>Judd Taylor, Orbital Systems, Ltd. judd dot t at orbitalsystems dot com</p>

<h1 id="PREVIOUS-AUTHORS">PREVIOUS AUTHORS</h1>

<p>Patrick Leilde patrick.leilde@ifremer.fr contribs of Olivier Archer olivier.archer@ifremer.fr</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>perl(1), PDL(1), PDL::IO::HDF(1).</p>


</body>

</html>


